/*! angular-chordpro 21-12-2013 */
!function(){angular.module("angular-chordpro.config",[]).value("angular-chordpro.config",{debug:!0}),angular.module("angular-chordpro.directives",[]),angular.module("angular-chordpro.filters",[]),angular.module("angular-chordpro.services",[]),angular.module("angular-chordpro",["angular-chordpro.config","angular-chordpro.directives","angular-chordpro.filters","angular-chordpro.services","ngSanitize"]),angular.module("angular-chordpro.services").factory("chordpro",function(){function a(a){var b=[],c=/\[([a-zA-Z0-9#/]+)\]/g,d=/^{.*}/,e=/^#/;return a.split("\n").forEach(function(a){var f;if(a.match(e));else if(a.match(d));else if(a.match(c)){for(var g,h={type:"lyrics",lyrics:"",chords:[]},i=0;g=c.exec(a);){f=a.substring(i,g.index),f&&(h.lyrics+=f);var j=0;if(h.chords.length>0){var k=h.chords[h.chords.length-1];j=Math.max(0,k.pos+k.chord.length+1-h.lyrics.length)}for(var l=0;j>l;l++)h.lyrics+=" ";var m=g[0];h.chords.push({pos:h.lyrics.length,chord:m.replace(/[\[\]]/g,"")}),i=g.index+m.length}f=a.substring(i,a.length),f&&(h.lyrics+=f),h.lyrics=h.lyrics.replace(/\s+$/,""),b.push(h)}else b.push({type:"lyrics",lyrics:a,chords:[]})}),b}function b(b){function c(a,b){for(;a.length<b.pos;)a+=" ";return a+=b.chord}var d=a(b),e="";return d.forEach(function(a){if("lyrics"===a.type){if(a.chords.length>0){e.length>0&&(e+="\n");var b="";a.chords.forEach(function(a){b=c(b,a)}),e+=b}(a.lyrics.length>0||0===a.chords.length)&&(e.length>0&&(e+="\n"),e+=a.lyrics)}}),e}return{parse:a,toText:b}})}(window,document);