/*! angular-chordpro 22-12-2013 */
!function(){angular.module("angular-chordpro.config",[]).value("angular-chordpro.config",{debug:!0}),angular.module("angular-chordpro.directives",[]),angular.module("angular-chordpro.filters",[]),angular.module("angular-chordpro.services",["ngSanitize"]),angular.module("angular-chordpro",["angular-chordpro.config","angular-chordpro.directives","angular-chordpro.filters","angular-chordpro.services","ngSanitize"]),angular.module("angular-chordpro.services").factory("chordpro",["$sanitize",function(a){function b(a){var b=[],c=/\[([a-zA-Z0-9#/]+)\]/g,d=/^{.*}/,e=/^#/;return a.split("\n").forEach(function(a){var f;if(a.match(e));else if(a.match(d));else if(a.match(c)){for(var g,h={type:"lyrics",lyrics:"",chords:[]},i=0;g=c.exec(a);){f=a.substring(i,g.index),f&&(h.lyrics+=f);var j=0;if(h.chords.length>0){var k=h.chords[h.chords.length-1];j=Math.max(0,k.pos+k.chord.length+1-h.lyrics.length)}for(var l=0;j>l;l++)h.lyrics+=" ";var m=g[0];h.chords.push({pos:h.lyrics.length,chord:m.replace(/[\[\]]/g,"")}),i=g.index+m.length}f=a.substring(i,a.length),f&&(h.lyrics+=f),h.lyrics=h.lyrics.replace(/\s+$/,""),b.push(h)}else b.push({type:"lyrics",lyrics:a,chords:[]})}),b}function c(a,b,c){function d(a,b){var d=a.replace(/(<([^>]+)>)/gi,""),e=b.pos-d.length;e>0&&(a+=Array(e+1).join(" "));var f=b.chord;return c&&(f=c(f)),a+=f}var e="";if(a.chords.length>0){var f="";a.chords.forEach(function(a){f=d(f,a)}),e+=f}return(a.lyrics.length>0||0===a.chords.length)&&(e.length>0&&(e+=b),e+=a.lyrics),e}function d(a,d,e){var f=b(a),g="";return f.forEach(function(a){"lyrics"===a.type&&(g.length>0&&(g+=d),g+=c(a,d,e))}),g}function e(a){return d(a,"\n")}function f(b,c){c||(c={}),c.chordFormatter||(c.chordFormatter=function(a){return"<b>"+a+"</b>"});var e="<pre>";return c.class&&(e='<pre class="'+c.class+'">'),a(e+d(b,"<br/>",c.chordFormatter)+"</pre>")}return{parse:b,toText:e,toHtml:f}}])}(window,document);